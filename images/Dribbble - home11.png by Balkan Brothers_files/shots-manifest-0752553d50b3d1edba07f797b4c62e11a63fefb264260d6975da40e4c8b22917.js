Dribbble.throttle=function(e,t,i){var n,o;return i=i||this,function(){var s=+new Date,r=arguments,a=function(){o=s,e.apply(i,r)};o&&s<o+t?n||(n=setTimeout(function(){a(),n=null},s-o+t)):a()}},Dribbble.InfiniteScroll={paginationContainerHTML:'<div class="loading-more"><span class="processing">Loading more\u2026</span></div>',genericLoadingIndicator:function(){return{retry:function(e){this.reset(),e.disabledNext=!1,e.fetchNextPage()},hide:$.noop,reset:$.noop,show:$.noop,showErrorEncountered:$.noop,showReachedEnd:$.noop,showThrottled:$.noop}},jqueryLoadingIndicator:function(e){var t=$(e),i=function(e){t.html('<span class="null-message">'+e+"</span>").show()};return $.extend({},new Dribbble.InfiniteScroll.genericLoadingIndicator,{originalContent:t.html(),show:function(){t.show()},hide:function(){t.hide()},reset:function(){t.html(this.originalContent)},showReachedEnd:function(){i("You\u2019ve reached the end of the list")},showErrorEncountered:function(){i("Something went wrong\u2026")},showThrottled:function(e){t.html('<div class="rate-limited"><a href="#" class="load-next-page">Load more\u2026</a> <span>You\u2019ve exceeded our rate limits, so you may need to wait a minute or so. <a href="http://help.dribbble.com/#rate-limits" target="_blank">(more info)</a><span></div>'),t.find("a.load-next-page").click(function(t){t.preventDefault(),this.retry(e)}.bind(this))}})},horizontalScrollingIndicator:function(e){return $.extend({},new Dribbble.InfiniteScroll.genericLoadingIndicator,{show:function(){e.append("<div class='processing' />")},hide:function(){e.find(".processing").remove()},showReachedEnd:function(){this.hide()},showErrorEncountered:function(){this.hide()},reset:function(){e.find(".rate-limited").remove(),this.hide()},showThrottled:function(t){this.hide(),e.append('<li class="rate-limited"><a href="#" class="load-next-page">Load more\u2026</a> <span>You\u2019ve exceeded our rate limits, so you may need to wait a minute or so. <a href="http://help.dribbble.com/#rate-limits" target="_blank">(more info)</a><span></li>'),e.find(".load-next-page").click(function(e){e.preventDefault(),this.retry(t)}.bind(this))}})}},Dribbble.InfiniteScroll.Generic=function(e){this.initialize(e)},Dribbble.InfiniteScroll.Generic.prototype={$el:null,scrollable:null,itemSelector:null,perPage:null,buffer:null,baseUrl:document.location.toString(),autoLoadPageLimit:null,autofill:!0,disabledNext:!1,loading:!1,reachedEnd:!1,throttleTime:25,lastPosition:0,loadingIndicator:null,unique:!1,initialize:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.scrollable=this.scrollable||this.$el,this.isScrolling=Dribbble.throttle(this.isScrolling,this.throttleTime,this),this.loadingIndicator=this.loadingIndicator||new Dribbble.InfiniteScroll.jqueryLoadingIndicator(this.loadingIndicatorSelector),this.setPage(),this.bindEventListeners()},reset:function(e){this.baseUrl=e||this.baseUrl,this.currentXhr&&this.currentXhr.abort(),this.reachedEnd=!1,this.disabledNext=!1,this.$el.empty(),this.loaded=0,this.resetPage(),this.setLoading(!1),this.fetchNextPage(function(){Dribbble.LargeShotViewRecorder&&Dribbble.LargeShotViewRecorder.start()})},bindEventListeners:function(){$(window).on("unload",this.onUnload.bind(this)).ready(this.onReady.bind(this))},onUnload:function(){$(window).scrollTop(0)},onReady:function(){return this.unique&&$(this.scrollable).off("scroll.infinite"),$(this.scrollable).on("scroll.infinite",this.isScrolling.bind(this)),this.deferredContentLoader?this.deferredContentLoader():this.noMoreItemsToLoad(this.$el.find(this.itemSelector))?(this.reachedEnd=!0,void this.setLoading(!1)):(this.disabledNext=!1,void(this.autofill&&this.fetchNextPageIfNeeded()))},isScrolling:function(){var e=this.scrollPosition();if(this.$el.toggleClass("is-scrolled",e>0),this.internalOnScroll&&this.internalOnScroll(e),!this.reachedEnd){this.onScroll&&this.onScroll.apply(this,[e]);var t=e>this.lastPosition;this.lastPosition=e,this.loading||t&&this.fetchNextPageIfNeeded(e)}},fetchNextPageIfNeeded:function(e){this.disabledNext||this.distanceToEnd(e)>this.buffer||this.fetchNextPage()},fetchNextPage:function(e){if(!this.loading)return this.setLoading(!0),this.fetchPage(this.page.last+1,e),!1},fetchPage:function(e,t){var i=this.urlForPage(e);this.onFetchPage&&this.onFetchPage(e,i);var n=function(e){202==this.currentXhr.status?(this.delay=(this.delay||0)+150,setTimeout(function(){this.fetchPage()}.bind(this),this.delay)):(this.showNextPage(e),t&&t())}.bind(this);this.currentXhr=$.ajax(i,{context:this,success:n,error:this.showError})},append:function(e){this.$el.append(e)},noMoreItemsToLoad:function(e){return e.length<this.perPage},showNextPage:function(e){var t;if(this.jsonItems?(t=this.jsonItems(e),this.append(e)):(t=$(e).filter(this.itemSelector),this.append(t),$("body").append($(e).filter("script"))),this.loaded+=t.length,this.page.last++,this.onAfterAppend&&this.onAfterAppend(t),this.setLoading(!1),this.noMoreItemsToLoad(t))return this.disabledNext=!0,this.reachedEnd=!0,this.loadingIndicator.showReachedEnd(),void $(this.loadNextButtonSelector).hide();if(this.autoLoadPageLimit&&this.page.last%this.autoLoadPageLimit==0){this.disabledNext=!0;var i=$(this.loadNextButtonSelector);i.show(),this.nextButtonCanLoadMore&&!this.nextButtonCanLoadMore()&&(this.reachedEnd=!0)}else this.autofill&&this.fetchNextPageIfNeeded()},setLoading:function(e){this.loading=e,e&&$(this.loadNextButtonSelector).hide(),this.loadingIndicator[e?"show":"hide"]()},resetPage:function(){this.setPage(0)},setPage:function(e){e="undefined"!=typeof e?e:1;var t=this.baseUrl.match(/page=(\d+)/);t&&(e=parseInt(t[1],10)),this.page={first:e,last:e}},showError:function(e){if(e=e||{},"abort"!=e.statusText){if(403==e.status)return this.loading=!1,void this.loadingIndicator.showThrottled(this);404==e.status?this.loadingIndicator.showReachedEnd():this.loadingIndicator.showErrorEncountered(e),this.disabledNext=!0,this.reachedEnd=!0,$(this.loadNextButtonSelector).hide()}},queryParamsForPage:function(e){return{page:e,per_page:this.perPage}},urlForPage:function(e){var t=this.queryParamsForPage(e),i=this.baseUrl.split("#")[0];return i.indexOf("?")>-1?i+"&"+$.param(t):i+"?"+$.param(t)}},Dribbble.InfiniteScroll.Vertical=function(e){this.initialize(e)},Dribbble.InfiniteScroll.Vertical.prototype=$.extend({},Dribbble.InfiniteScroll.Generic.prototype,{buffer:window.innerHeight,scrollable:window,bindEventListeners:function(){Dribbble.InfiniteScroll.Generic.prototype.bindEventListeners.apply(this),this.$backToTop&&this.$backToTop.on("click",function(){$("html,body").animate({scrollTop:0,display:"none"},500)})},distanceToEnd:function(e){return this.$el.height()-$(this.scrollable).height()-(e||this.scrollPosition())},internalOnScroll:function(e){this.$backToTop&&!Dribbble.isMobile()&&(e>50?this.$backToTop.fadeIn(100):this.$backToTop.fadeOut(100))},scrollPosition:function(){return $(this.scrollable).scrollTop()}}),Dribbble.InfiniteScroll.Horizontal=function(e){this.initialize(e)},Dribbble.InfiniteScroll.Horizontal.prototype=$.extend({},Dribbble.InfiniteScroll.Generic.prototype,{initialize:function(e){Dribbble.InfiniteScroll.Generic.prototype.initialize.apply(this,[e]),this.buffer=.75*this.$el.width()},distanceToEnd:function(e){var t=(e||this.scrollPosition())+$(this.scrollable).width();return this.$el[0].scrollWidth-t},scrollPosition:function(){return $(this.scrollable).scrollLeft()}}),Dribbble.InfiniteScroll.Vertical.Simple=function(e){this.initialize(e)},Dribbble.InfiniteScroll.Vertical.Simple.prototype=$.extend({},Dribbble.InfiniteScroll.Vertical.prototype,{initialize:function(e){var t=$(e.paginationContainerSelector||"div.page");t.find(".pagination").hide(),$(Dribbble.InfiniteScroll.paginationContainerHTML).insertAfter(e.$el);var i=$.extend({},e,{loadingIndicatorSelector:".loading-more",$backToTop:e.$backToTop||$("div.back-to-top")});Dribbble.InfiniteScroll.Vertical.prototype.initialize.apply(this,[i])}}),Dribbble.ShotOverlay={$el:null,active:!1,infiniteScroller:null,originalUrl:null,shotClickTargetSelector:null,shotElSelector:null,currentShotId:null,hideOnMobileSelector:"#wrap, #header, #footer",init:function(e){e=e||{},this.setInfiniteScroller(e.infiniteScroller),this.originalUrl=e.originalUrl,this.shotClickTargetSelector=e.shotClickTargetSelector,this.shotElSelector=e.shotElSelector,this.onTrigger=e.onTrigger||$.noop,this.bindEventListeners(),this.active=!0},setInfiniteScroller:function(e){this.infiniteScroller=e,this.infiniteScroller?(this.$el=this.infiniteScroller.$el,this.infiniteScroller.onAfterAppend=this.addShotsToList.bind(this)):this.$el=null},bindEventListeners:function(){var e=function(e){return e.shiftKey||e.ctrlKey||e.metaKey};$(this.shotClickTargetSelector).live("click",function(t){if(this.onTrigger&&this.onTrigger(t),!e(t))return this.open($(t.currentTarget)),!1}.bind(this)),$(".rebound-title a, .more-thumbs li a").live("click",function(t){if(!e(t))return this.open($(t.currentTarget),!0),!1}.bind(this)),$("div.shot-overlay, a.close-overlay").live("click",function(){return this.close(),!1}.bind(this)),$("div.shot-overlay div.overlay-content").live("click",function(e){e.stopPropagation()}),Dribbble.Hotkeys.map("screenshots",{ESCAPE:function(){this.isOpen()&&this.close()}.bind(this)},function(){return!Dribbble.Attachments.overlayVisible()&&!Dribbble.Overlay.anyOpen()&&0===$(".share-shot.expanded").length})},open:function(e,t){var i=e.attr("href");Dribbble.Router.pushState({"steps-from-list":this.stepsToListPage()+1,"disable-nav":!!t},null,i)},close:function(){this.stepsToListPage()>history.length?Dribbble.Router.pushState(null,null,this.originalUrl):Dribbble.Router.go(-this.stepsToListPage())},$currentShotEl:function(){return this.$el.find("#screenshot-"+this.currentShotId).last()},$next:function(){return this.$currentShotEl().nextAll(this.shotElSelector).first()},$prev:function(){return this.$currentShotEl().prevAll(this.shotElSelector).first()},show:function(e){this.infiniteScroller.autofill=!1,this.currentShotId=e.match(/shots\/(\d+)/)[1],$.ajax(e,{dataType:"html",context:this,cache:!1,success:function(e){if($(".overlay-content").html(e),$(".main-shot").removeClass("full-800"),Dribbble.isMobile()?(this.listScrollPos=$(document).scrollTop(),$(document).scrollTop(0),$(this.hideOnMobileSelector).hide()):$("body").addClass("noscroll"),$(".shot-overlay, .overlay-content").show().focus(),Dribbble.HoverCards&&Dribbble.HoverCards.dismiss(),$(".tipsy").remove(),Dribbble.Hotkeys.TextAreaSubmission.fillShortcuts(),this.shouldShowNav()){var t=this.$prev(),i=this.$next();i[0]||this.infiniteScroller.reachedEnd||(this.infiniteScroller.disabledNext=!1,this.infiniteScroller.fetchNextPage()),t[0]&&this.showPrevButton(t),i[0]&&this.showNextButton(i)}}})},shouldShowNav:function(){return!History.getState().data["disable-nav"]},stepsToListPage:function(){var e=History.getState().data["steps-from-list"]||0;return e},showNextButton:function(e){e[0]&&$(".overlay-content").find(".shot-nav-next").click(function(){return this.open(this.findSiblingLink(e)),!1}.bind(this)).show()},showPrevButton:function(e){$(".overlay-content").find(".shot-nav-prev").click(function(){return this.open(this.findSiblingLink(e)),!1}.bind(this)).show()},findSiblingLink:function(e){return e.attr("href")?e:e.find("a.dribbble-over")},hide:function(){this.infiniteScroller.autofill=!0,$(this.hideOnMobileSelector).show(),$("body").removeClass("noscroll"),Dribbble.isMobile()&&$(document).scrollTop(this.listScrollPos),$(".shot-overlay, .overlay-content").scrollTop(0).hide()},addShotsToList:function(e){e.length&&this.showNextButton(this.$next())},isOpen:function(){return $(".shot-overlay").is(":visible")}},Dribbble.Screenshots={AUTOMATIC_LIMIT:8,DEFAULT_PER_PAGE:12,originalUrl:document.location.toString(),initialize:function(e){Dribbble.isHistorySupported()&&$(".dribbbles")[0]&&(this.findElements(),this.infiniteScroller=new Dribbble.InfiniteScroll.Vertical(this.scrollerOptions(e)),e.enable_overlay&&Dribbble.ShotOverlay.init({infiniteScroller:this.infiniteScroller,originalUrl:this.originalUrl,shotClickTargetSelector:".dribbbles:not(.selectable) a.dribbble-link, .dribbbles:not(.selectable) a.dribbble-over, .dribbbles:not(.selectable) a.gif-target",shotElSelector:"li.group"}),Dribbble.AnimatedGifSwap&&Dribbble.AnimatedGifSwap.attach(".gif-target",{parentSelector:"li.group:first",picSelector:".dribbble-shot picture"}),this.bindEventListeners())},bindEventListeners:function(){this.loadNextButton.find(".load-more").click(function(){this.infiniteScroller.disabledNext=!1,this.infiniteScroller.fetchNextPage(),this.shuffleAd()}.bind(this))},onFetchPage:function(e,t){Dribbble.Analytics.logDribbbleGAPageView(t)},findElements:function(){var e=$("#main");this.list=e.find("ol.dribbbles"),this.loadNextButton=e.find(".infinite:not(.previous)"),this.footer=$(".secondary"),this.footer.is(":visible")||(this.footer=$("#footer")),e.find(".page").remove()},shuffleAd:function(){Dribbble.Ads.shuffle()},refreshList:function(e){this.infiniteScroller.reset(e)},scrollerOptions:function(e){var t={$el:this.list,itemSelector:"li.group",loadNextButtonSelector:this.loadNextButton.selector,loadingIndicatorSelector:".loading-more:not(.previous)",perPage:this.DEFAULT_PER_PAGE,autoLoadPageLimit:e.page_limit||this.AUTOMATIC_LIMIT,onFetchPage:this.onFetchPage.bind(this),buffer:window.innerHeight-this.footer.height(),$backToTop:$("div.back-to-top"),unique:!0,nextButtonCanLoadMore:function(){return 0===$(".sign-up-to-continue").length},append:function(e){var t=this.$el.find(this.itemSelector).map(function(){return this.id});e=$.grep(e,function(e){return $.inArray(e.id,t)==-1}),this.$el.append(e)}};return e.deferredContent&&(t=$.extend(t,{deferredContentLoader:this.refreshList.bind(this),queryParamsForPage:function(){return{cursor:Dribbble.Screenshots.cursor,per_page:this.perPage,page:this.page.last+1}},resetPage:function(){Dribbble.Screenshots.cursor=null,this.setPage(0)}})),e.cursor&&(t=$.extend(t,{noMoreItemsToLoad:function(){return Dribbble.Screenshots.noMoreItemsToLoad},queryParamsForPage:function(){return{cursor:Dribbble.Screenshots.cursor,per_page:this.perPage,page:this.page.last+1,sig:Dribbble.Screenshots.signature}},resetPage:function(){Dribbble.Screenshots.cursor=null,this.setPage(0)}})),t}};var Screenshot={Like:{Shot:{toggle:function(){if(0!=$(".logged-in").length){if(0==$("a[data-fav-toggle=shot].processing").length){var e=$("a[data-fav-toggle=shot]"),t=e.attr("href"),i=!e.hasClass("current-user-likes"),n=i?{}:{_method:"delete"},o=$(".the-shot").data().screenshot_id;$.ajax({type:"POST",url:t,data:n,beforeSend:function(){e.addClass("processing"),e.find("span.stats-label").text("Wait\u2026")},success:function(t){e.parent("li").replaceWith(t),Dribbble.Shots.logAnalyticsLike(o,{action:i?"like":"unlike"})}})}return!1}}},Comment:{toggle:function(){var e=$(this),t=e.hasClass("liked-by-current-user")?{_method:"delete"}:null;return $.ajax({type:"POST",url:this.href,data:t,success:function(t){var i=$(t),n=e.closest(".comment");n.find(".reply").length&&Dribbble.Comments.ReplyLinks.add(i),n.replaceWith(i)}}),!1}}},Flag:{showFlag:function(){return $(".flag-confirm").slideDown(),!1},flag:function(){var e=$(this).attr("action"),t=$(this).find("input#screenshot_id").val(),i=$("#flag_note").val();return!!confirm("You are about to report this shot as abuse of Dribbble. Are you sure you wish to continue?")&&($.ajax({type:"POST",url:e,data:{screenshot_id:t,note:i},success:function(e){$("#flag-section").html(e)}}),!1)},unflag:function(){var e=$(this),t=e.modelId();return $.ajax({type:"POST",url:this.href,data:{_method:"delete",screenshot_id:t},success:function(e){$("#flag-section").html(e)}}),!1}},Page:{next:function(){return $(".shot-nav-next a").click(),!0},prev:function(){return $(".shot-nav-prev a").click(),!0}},Shot:{twotimes:function(){if(window.matchMedia("screen and (max-width: "+DEVICE_WIDTH_BREAKPOINT+")").matches)return!1;var e=$(".main-shot");if(!e.hasClass("zoomable"))return!1;var t="full-800",i=window.matchMedia(HIDPI_BREAKPOINT).matches,n=$(".the-shot .single-img");if(e.hasClass(t))e.removeClass(t),!i&&n.find("picture").length&&(n.find("img").attr("src",n.find("img").attr("data-oldsrc")),n.find("source:not([media])").attr("srcset",n.find("source:not([media])").attr("data-oldsrc")));else if(e.addClass(t),!i&&n.find("picture").length){var o=n.find("source[media]").attr("srcset"),s=n.find("img");s.attr("data-oldsrc",s.attr("src")),s.attr("src",o);var r=n.find("source:not([media])");r.attr("data-oldsrc",r.attr("srcset")),r.attr("srcset",o)}}},Bucket:{open:function(){$("a[data-bucket-add]").click()}},Share:{close:function(){$(".share-shot.expanded").click()}}};$(".admin a.flag").live("click",Screenshot.Flag.showFlag),$(".admin a.unflag").live("click",Screenshot.Flag.unflag),$(".admin form.flag-confirm").live("submit",Screenshot.Flag.flag),$("a[data-fav-toggle=shot]").live("click",Screenshot.Like.Shot.toggle),Dribbble.Hotkeys.map("screenshot",{B:Screenshot.Bucket.open,F:Screenshot.Like.Shot.toggle,L:Screenshot.Like.Shot.toggle,Z:Screenshot.Shot.twotimes,LEFT:Screenshot.Page.prev,RIGHT:Screenshot.Page.next,ESCAPE:function(){setTimeout(function(){Screenshot.Share.close()},0)}},function(){return!Dribbble.Attachments.overlayVisible()&&!Dribbble.Overlay.anyOpen()}),$(".share-shot").live("click",function(){return $(this).toggleClass("expanded"),$(".share-btns").fadeToggle("fast"),!1}),$(".comment a.likes").live("click",Screenshot.Like.Comment.toggle);var newLocation,shorterTotal=function(e){return e>=1e6?e=(e/1e6).toFixed(2)+"M":e>=1e3&&(e=(e/1e3).toFixed(1)+"k"),e};!function(e){e.fn.charCount=function(t){function i(i){var n=e(i).val().length,o=t.allowed-n;o<=t.warning&&o>=0?e(i).next().addClass(t.cssWarning):e(i).next().removeClass(t.cssWarning),o<0?e(i).next().addClass(t.cssExceeded):e(i).next().removeClass(t.cssExceeded),e(i).next().html(t.counterText+o)}var n={allowed:140,warning:20,css:"counter",counterElement:"span",cssWarning:"warning",cssExceeded:"exceeded",counterText:""},t=e.extend(n,t);this.each(function(){e(this).after("<"+t.counterElement+' class="'+t.css+'">'+t.counterText+"</"+t.counterElement+">"),i(this),e(this).keyup(function(){i(this)}),e(this).change(function(){i(this)})})}}(jQuery),Dribbble.Bucket=function(e){this.options=e||{},this.type=e.type||"bucket",this.target=e.target,this.container=e.container,this.createOverlay(),this.bindEventListeners()},Dribbble.Bucket.prototype={bindEventListeners:function(){var e="click."+this.options.type;$(this.options.parentTarget||document).off(e).on(e,this.target,this.show.bind(this)),this.overlay.$el.keyup(this.navigate.bind(this)).delegate(".create form .cancel","click",this.hideCreate.bind(this)).delegate(".create form","submit",this.create.bind(this)).delegate(".add a.create","click",this.showCreate.bind(this)).delegate("ol li a","click",this.toggleClicked.bind(this)).delegate("#bucket_query","keyup",this.search.bind(this)).delegate("#bucket_search","submit",function(){return!1}).delegate("ol li","mousemove",this.onMouseMove.bind(this))},create:function(e){var t=$(e.target);return $.ajax({context:this,type:"POST",url:t.attr("action"),data:t.serialize(),beforeSend:function(){$("#bucket-add form input[type=submit]").addClass("processing").attr("disabled","true").attr("value","Processing, please wait\u2026")},statusCode:{201:function(e){this.refresh(e)},200:function(e){this.overlay.find(".create-bucket").html(e)},422:function(e){if(e.getResponseHeader("content-type").indexOf("json")>-1){var i=JSON.parse(e.responseText);t.clank(i.message)}else this.overlay.find(".create-good").html(e.responseText),$("#json-field").length||this.overlay.find(".create-good form").append($("<input>",{id:"json-field",type:"hidden",name:"json",value:!0}))}}},"json"),!1},createOverlay:function(){var e=$("<div />",{id:this.type+"-overlay","class":"overlay"}).appendTo("body").append($("<div />",{id:this.type+"-add","class":"lightbox"}).append($("<a />",{href:"#","class":"close"}).append($("<img />",{src:"/assets/icon-x-lg-e151cb8ae2e919c5d928dbd90c4b073c6bc7e658ee7a9bb456fb0097ea40f26e.png"}))).append($("<div />",{"class":"display"}).append($("<div />",{"class":"processing",text:"Loading\u2026"})))),t=[function(){this.overlay.$el.find(".display").html($("<div />",{"class":"processing",text:"Loading\u2026"})),Dribbble.isMobileSafari()||$("body").removeClass("noscroll")}.bind(this)];if("bucket"==this.type){var i=this,n="/shots/"+this.options.screenshotId+"/buckets_menu";t.push(function(){$(i.container).load(n)})}this.overlay=new Dribbble.Overlay.Simple({$el:e,onHide:t})},hasItems:function(){return this.overlay.find(".add ol li").length>0},hideCreate:function(){this.hasItems()?this.showAdd():this.overlay.hide()},navigate:function(e){var t=$("#bucket_query");if(t.is(":visible")){switch(e.which){case 13:"project"==this.type&&this.current&&this.current.hasClass("bucketed")?this.overlay.find("#bucket_form").submit():this.toggle(this.current);break;case 27:""==$.trim(t.val())?this.overlay.hide():t.val("").trigger("keyup");break;case 38:case 40:var i=38==e.which?this.current.prev():this.current.next();this.select(i,{scrollIntoView:!0})}return!1}},onMouseMove:function(e){if(!this.scrolling){var t=$(e.target).closest("li");this.current&&t.get(0)==this.current.get(0)||this.select(t)}},refresh:function(e){var t=this,i=this.options.listUrl;i||(i=$(this.options.target).attr("href")),e=e||{},this.overlay.find(".display").load(i,function(){if(t.hasItems())if(t.showAdd(),e.id){var i="#"+t.type+"-"+e.id;t.select(i),t.toggle(i)}else t.select("ol.group li:first-child");else t.showCreate();t.overlay.$el.find("ol.group").scroll(function(){clearTimeout(t.scrolling),t.scrolling=setTimeout(function(){t.scrolling=!1},250)})})},search:function(e){if(e)switch(e.which){case 13:case 27:case 38:case 40:return void e.preventDefault()}var t=this.overlay.find("#bucket_query").val().toLowerCase();this.overlay.find("ol.group li").each(function(){var e=$(this),i=e.find("a strong").text();i.toLowerCase().search(t)>-1?e.show():e.hide()}).sort(function(e,i){var n=$(e).find("a strong").text(),o=$(i).find("a strong").text(),s=n.toLowerCase().search(t),r=o.toLowerCase().search(t);return s==r?n>o?1:-1:s>r?1:-1}).appendTo(this.overlay.find("ol.group")),this.select(this.overlay.find("ol.group li:visible").eq(0))},select:function(e,t){var i=$(e);return 0!=i.length&&(this.current&&this.current.removeClass("current"),this.current=i,this.current.addClass("current"),t&&t.scrollIntoView&&i.get(0).scrollIntoView(!1),!1)},show:function(){return this.refresh(),this.overlay.show(),Dribbble.isMobileSafari()||$("body").addClass("noscroll"),!1},showAdd:function(){this.overlay.find(".add").show().end().find(".create-bucket, .create-good").hide().end(),Dribbble.isMobile()||$("#bucket_query").focus()},showCreate:function(){if("good"==this.type)$("#json-field").length||this.overlay.find(".create-good form").append($("<input>",{id:"json-field",type:"hidden",name:"json",value:!0})),this.overlay.find(".add").hide().end().find(".create-good").show().end(),this.overlay.find("#good_title").focus();else{this.overlay.find(".add").hide().end().find(".create-bucket").show().end();var e=$("#"+this.type+"_name",this.overlay.$el),t=$("#"+this.type+"_description",this.overlay.$el);e.next().hasClass("counter")||e.charCount({allowed:64,warning:10}),t.next().hasClass("counter")||t.charCount({allowed:160}),$("#bucket_name").focus()}return!1},toggle:function(e){var t=this.overlay.find(e);if("bucket"==this.type){var i=$("#bucket_form").attr("action"),n=function(e){t.replaceWith(e),this.select("#bucket-"+t.modelId())}.bind(this),o=function(e){Notify.error(e.responseText),this.overlay.hide()}.bind(this);t.hasClass("bucketed")?$.ajax(i+"/"+t.modelId(),{type:"DELETE",success:n}):$.post(i,{bucket_id:t.modelId(),screenshot_id:this.screenshotId}).done(n).fail(o),t.toggleClass("bucketed")}else if("good"==this.type)$("ol.goods li.included").removeClass("included"),t.addClass("included"),this.overlay.find(".add form button.form-sub").attr("disabled",!1);else{var e=".bucketed:not(.team)",s=this.overlay.find("#bucket_form");t.hasClass("team")&&(e=".bucketed.team"),t.addClass("bucketed"),t.siblings(e).addClass("unbucketed").removeClass("bucketed"),s.find("input[data-user-id="+t.data("user-id")+"]").remove(),input=$("<input>",{type:"hidden",name:"bucket_id[]","data-user-id":t.data("user-id")}).appendTo(s),input.val(t.modelId()),this.overlay.find(".add form button.form-sub").attr("disabled",!1)}return Dribbble.isMobile()||$("#bucket_query").focus(),!1},toggleClicked:function(e){return this.toggle($(e.target).closest("li"))}},function($){$.fn.editable=function(e,t){if("disable"==e)return void $(this).data("disabled.editable",!0);if("enable"==e)return void $(this).data("disabled.editable",!1);if("destroy"==e)return void $(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");var i=$.extend({},$.fn.editable.defaults,{target:e},t),n=$.editable.types[i.type].plugin||function(){},o=$.editable.types[i.type].submit||function(){},s=$.editable.types[i.type].buttons||$.editable.types.defaults.buttons,r=$.editable.types[i.type].content||$.editable.types.defaults.content,a=$.editable.types[i.type].element||$.editable.types.defaults.element,l=$.editable.types[i.type].reset||$.editable.types.defaults.reset,c=i.callback||function(){},h=i.onedit||function(){},d=i.onsubmit||function(){},u=i.onreset||function(){},f=i.onerror||l;return i.tooltip&&$(this).attr("title",i.tooltip),i.autowidth="auto"==i.width,i.autoheight="auto"==i.height,this.each(function(){var e=this,t=$(e).width(),b=$(e).height();$(this).data("event.editable",i.event),$.trim($(this).html())||$(this).html(i.placeholder),$(this).bind(i.event,function(u){if(!0!==$(this).data("disabled.editable")&&!e.editing&&!1!==h.apply(this,[i,e])){u.preventDefault(),u.stopPropagation(),i.tooltip&&$(e).removeAttr("title"),0==$(e).width()?(i.width=t,i.height=b):("none"!=i.width&&(i.width=i.autowidth?$(e).width():i.width),"none"!=i.height&&(i.height=i.autoheight?$(e).height():i.height)),$(this).html().toLowerCase().replace(/(;|")/g,"")==i.placeholder.toLowerCase().replace(/(;|")/g,"")&&$(this).html(""),e.editing=!0,e.revert=$(e).html(),$(e).html("");var p=$("<form />");i.cssclass&&("inherit"==i.cssclass?p.attr("class",$(e).attr("class")):p.attr("class",i.cssclass)),i.style&&("inherit"==i.style?(p.attr("style",$(e).attr("style")),p.css("display",$(e).css("display"))):p.attr("style",i.style));var m,g=a.apply(p,[i,e]);if(i.loadurl){var v=setTimeout(function(){g.disabled=!0,r.apply(p,[i.loadtext,i,e])},100),y={};null!=i.id&&(y[i.id]=e.id),$.isFunction(i.loaddata)?$.extend(y,i.loaddata.apply(e,[e.revert,i])):$.extend(y,i.loaddata),$.ajax({type:i.loadtype,url:i.loadurl,data:y,async:!1,success:function(e){window.clearTimeout(v),m=e,g.disabled=!1}})}else i.data?(m=i.data,$.isFunction(i.data)&&(m=i.data.apply(e,[e.revert,i]))):m=e.revert;r.apply(p,[m,i,e]),g.attr("name",i.name),s.apply(p,[i,e]),$(e).append(p),n.apply(p,[i,e]),$(":input:visible:enabled:first",p).focus(),i.select&&g.select(),g.keydown(function(t){27==t.keyCode&&(t.preventDefault(),l.apply(p,[i,e]))});var v;"cancel"==i.onblur?g.blur(function(){v=setTimeout(function(){l.apply(p,[i,e])},500)}):"submit"==i.onblur?g.blur(function(){v=setTimeout(function(){p.submit()},200)}):$.isFunction(i.onblur)?g.blur(function(){i.onblur.apply(e,[g.val(),i])}):g.blur(function(){}),p.submit(function(t){if(v&&clearTimeout(v),t.preventDefault(),!1!==d.apply(p,[i,e])&&!1!==o.apply(p,[i,e]))if($.isFunction(i.target)){var n=i.target.apply(e,[g.val(),i]);$(e).html(n),e.editing=!1,c.apply(e,[e.innerHTML,i]),$.trim($(e).html())||$(e).html(i.placeholder)}else{var s={};s[i.name]=g.val(),null!=i.id&&(s[i.id]=e.id),$.isFunction(i.submitdata)?$.extend(s,i.submitdata.apply(e,[e.revert,i])):$.extend(s,i.submitdata),"PUT"==i.method&&(s._method="put"),$(e).html(i.indicator);var r={type:"POST",data:s,dataType:"html",url:i.target,success:function(t){"html"==r.dataType&&$(e).html(t),e.editing=!1,c.apply(e,[t,i]),$.trim($(e).html())||$(e).html(i.placeholder)},error:function(t){f.apply(p,[i,e,t])}};$.extend(r,i.ajaxoptions),$.ajax(r)}return $(e).attr("title",i.tooltip),!1})}}),this.reset=function(t){this.editing&&!1!==u.apply(t,[i,e])&&($(e).html(e.revert),e.editing=!1,$.trim($(e).html())||$(e).html(i.placeholder),i.tooltip&&$(e).attr("title",i.tooltip))}})},$.editable={types:{defaults:{element:function(){var e=$('<input type="hidden"></input>');return $(this).append(e),e},content:function(e){$(":input:first",this).val(e)},reset:function(e,t){t.reset(this)},buttons:function(e,t){var i=this;if(e.submit){if(e.submit.match(/>$/))var n=$(e.submit).click(function(){"submit"!=n.attr("type")&&i.submit()});else{var n=$('<button type="submit" />');n.html(e.submit)}$(this).append(n)}if(e.cancel){if(e.cancel.match(/>$/))var o=$(e.cancel);else{var o=$('<button type="cancel" />');o.html(e.cancel)}$(this).append(o),$(o).click(function(){if($.isFunction($.editable.types[e.type].reset))var n=$.editable.types[e.type].reset;else var n=$.editable.types.defaults.reset;return n.apply(i,[e,t]),!1})}}},text:{element:function(e){var t=$("<input />");return"none"!=e.width&&t.width(e.width),"none"!=e.height&&t.height(e.height),t.attr("autocomplete","off"),$(this).append(t),t}},textarea:{element:function(e){var t=$("<textarea />");return e.rows?t.attr("rows",e.rows):"none"!=e.height&&t.height(e.height),e.cols?t.attr("cols",e.cols):"none"!=e.width&&t.width(e.width),$(this).append(t),t}},select:{element:function(){var e=$("<select />");return $(this).append(e),e},content:function(data,settings,original){if(String==data.constructor)eval("var json = "+data);else var json=data;for(var key in json)if(json.hasOwnProperty(key)&&"selected"!=key){var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){$(this).val()!=json.selected&&$(this).text()!=$.trim(original.revert)||$(this).attr("selected","selected")})}}},addInputType:function(e,t){$.editable.types[e]=t}},$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}}(jQuery),Dribbble.Mentions=function(e,t){this.$el=e,this.el=e[0],this.localData=[],this.options=$.extend({},t,this.defaultWidgetOptions()),this.addLocalData(this.options.users||Screenshot.autocompleteJson||[]),this.bindEventListeners()},Dribbble.Mentions.followedUsers=[],Dribbble.Mentions.prototype={minChars:2,maxLocalMatches:10,cache:new Dribbble.AutocompleteCache,bindEventListeners:function(){Dribbble.Autocomplete(this.$el,this.options,function(e){this.widget=e}.bind(this)),Dribbble.Mentions.followedUsers.length>0?this.addFollowedUsersToLocalData():$.get(this.options.url,this.addFollowedUsersToLocalData.bind(this))},uniqueConcat:function(e,t){var i=[];$.each(e,function(e,t){i.push(t.user_id)});var n=e;return $.each(t,function(e,t){i.indexOf(t.user_id)==-1&&n.push(t)}),n},addLocalData:function(e){this.localData=this.uniqueConcat(this.localData,e)},addFollowedUsersToLocalData:function(e){e&&(Dribbble.Mentions.followedUsers=e),this.addLocalData(Dribbble.Mentions.followedUsers)},extractTerm:function(){var e=this.$el.prop("selectionEnd"),t=this.$el.val().substring(0,e),i=t.lastIndexOf("@");return i==-1?null:t.substring(i+1).toLowerCase()},finder:function(e,t){var i=[];$.each(this.localData,function(t,n){var o=0==n.login.toLowerCase().indexOf(e),s=n.name&&0==n.name.toLowerCase().indexOf(e);(o||s)&&(i.push(n),i.length>=this.maxLocalMatches)}),$.get("/mention_autocomplete",{q:e},function(e){t(this.uniqueConcat(i,e))}.bind(this))},cachedFinder:function(e,t){this.cache.lookup(e,t,this.finder.bind(this))},insertMention:function(e){var t=this.$el.prop("selectionEnd"),i=(this.extractTerm(),this.$el.val()),n=i.slice(0,t),o=n.lastIndexOf("@"),s=i.slice(t),n=n.slice(0,o+1),r=0==s.length?" ":"";this.$el.val(n+e+r+s),this.$el.prop("selectionEnd",(n+e+r).length+1)},defaultWidgetOptions:function(){return bindAll({autoFocus:!0,source:function(e,t){var i=this.extractTerm();this.cachedFinder(i,t)},search:function(){var e=this.extractTerm();if(null==e||""==e||e.length<this.minChars||this.cache.isDeadEnd(e))return this.widget.close(),!1},focus:function(e){e.preventDefault()},select:function(e,t){this.insertMention(t.item.name),this.$el.after($('<input type="hidden" name="mentioned_user_id_list[]"/>').val(t.item.user_id)),this.widget.disable(),e.preventDefault()},keypress:function(e){"@"===String.fromCharCode(e.which)&&this.widget.enable()},renderer:function(e,t){var i=t.name||t.login,n='<img src="'+t.avatar_url+'" class="photo fn"> <strong>'+i+"</strong> ("+t.login+")";
return $("<li></li>").data("item.autocomplete",t).append($("<a></a>").html(n)).appendTo(e)}},this)}},Dribbble.Comments=function(e,t,i){this.onLoad=t,this.bindEventListeners(i),this.load(e)},Dribbble.Comments.prototype={bindEventListeners:function(e){this.initNavigationLinks(),this.makeFansViewable(),e.apply(this)},load:function(e,t){$.get(e,function(e){var i=$("#comments-section");i.html(e);var n,o;t?(n=$(".shot-overlay:visible")[0],o=i[0].getBoundingClientRect().top+$(n).scrollTop()):location.hash&&0===location.hash.indexOf("#comment-")&&(o=$(location.hash).offset().top),o&&$(n||$("html, body")).animate({scrollTop:o},500),$(".comment.current-user .comment-body").each(function(e,t){this.makeCommentEditable(t)}.bind(this)),this.onLoad&&this.onLoad()}.bind(this))},initNavigationLinks:function(){$(document).on("click.comment-nav",".comments-sort a, #comments-section .comment-pagination a",function(e){var t=$(e.currentTarget).attr("href").split("?")[1],i=this.url(t);return this.load(i,this.initComments,!0),!1}.bind(this))},makeFansViewable:function(){$(document).on("click.view-comment-fans","#comments-section .comment .likes-list",function(){var e=$(this);if(e.data("loading"))return!1;var t=e.closest(".comment"),i=t.find(".comment-likes");return i.length?i.remove():(e.data("loading",!0),$.get(this.href,function(i){e.removeData("loading"),t.append(i)})),!1})},url:function(e){var t=$(".the-shot").data("screenshot_id"),i="/shots/"+t+"/comments";return e&&(i=i+"?"+e),i},makeCommentsDeleteable:function(e){var t=e?".comment":".comment.current-user";$(document).on("click.delete-comment",t+" a.delete",function(){var e=confirm("You are about to delete this comment. Continue?");if(!e)return!1;var t=$(this);return $.post(this.href,{_method:"delete"},function(e){var i=$("#comments-section .count");0==e.count&&i.hide(),i.html(e.header),t.closest(".comment").remove()},"json"),!1})},makeCommentsEditable:function(){$(document).on("click.edit-comments",".comment.current-user a.edit",function(e){var t=$(e.currentTarget),i=t.closest(".comment").find(".comment-body").trigger("programmaticEvent.editable");return this.Mentions.enable(t.data("autocomplete"),i.find("textarea")),!1}.bind(this))},makeCommentEditable:function(e){var t=$(e),i=(t.closest(".comment").modelId(),t.closest(".comment").find("a.edit").attr("href")),n=t.closest(".comment").find("a.delete").attr("href");t.editable(n,{loadurl:i,type:"textarea",width:"none",height:"none",DEheight:"none",name:"text",method:"PUT",cssclass:"comment group edit-comment",id:null,submit:"Save",cancel:"Cancel",indicator:'<span class="processing">Saving\u2026</span>',event:"programmaticEvent.editable",onblur:"ignore",submitdata:function(){var e=$.map($(this).find('input[type=hidden][name="mentioned_user_id_list[]"]'),function(e){return e.value});return{"mentioned_user_id_list[]":e}}})},Mentions:{enable:function(e,t){new Dribbble.Mentions(t,{url:e})}},enableAjaxSubmission:function(){$("#comment_text").keydown(function(e){if(e.metaKey&&13==e.keyCode)return $("#add-comment").submit(),!1}),$("#add-comment").ajaxForm({dataType:"json",beforeSend:function(){return $("#add-comment").removeClass("error"),$("#add-comment .error").remove(),""!=$("#add-comment textarea").val()&&void $("#post-comment-btn").addClass("processing").attr("disabled","true").attr("value","Processing, please wait\u2026")},success:function(e){e.redirect_to?window.location=e.redirect_to:($("#comments").append(e.comment),$("#comments-section .count").html(e.header).show(),$("#add-comment textarea").val(""),$("#post-comment-btn").removeAttr("disabled").attr("value","Post comment"),$("#post-comment-btn").removeClass("processing"),this.makeCommentEditable("#comment-"+e.id+" .comment-body"),$('#add-comment input[name="mentioned_user_id_list[]"]').remove())}.bind(this),error:function(e){var t=$.parseJSON(e.responseText),i=(t.text||t.base)[0];$("#add-comment").addClass("error"),$("#add-comment textarea").after($("<p>",{text:i,"class":"error"})),$("#post-comment-btn").removeAttr("disabled").removeClass("processing").attr("value","Post comment")}})}},Dribbble.Comments.ReplyLinks={addAll:function(e){$("#comments li").each(function(t,i){var n=parseInt($(i).data("user-id"),10);e!=n&&this.add($(i))}.bind(this))},add:function(e){e.find(".reply").length||(e.find(".posted").after(' <span class="sep">|</span> <a href="#" class="reply">Reply</a>'),e.find(".reply").on("click",function(e){var t=$(this).parents("li"),i=$("#add-comment textarea"),n=i.prop("selectionEnd"),o=i.val(),s=t.hasClass("rebound")?t.find('.comment-body a[rel="contact"]'):t.find('a[rel="contact"]'),r=$.trim(s.text()),a="@"+r+" ",o=o.substring(0,n)+a+o.substring(n);return n+=a.length,e.shiftKey||i.focus(),i.val(o).prop("selectionEnd",n).prop("selectionStart",n).after($('<input type="hidden" name="mentioned_user_id_list[]"/>').val(t.data("user-id"))),!1}))}},Dribbble.Attachments={initialize:function(){this.findElements(),this.bindEventListeners(),this.swipeEnabled=!0,Dribbble.Hotkeys.map("attachments",{ESCAPE:Dribbble.Attachments.Keys.escape,RIGHT:Dribbble.Attachments.Keys.right,LEFT:Dribbble.Attachments.Keys.left},Dribbble.Attachments.overlayVisible.bind(this))},bindEventListeners:function(){var e=this;this.links.live("click",function(t){if(!t.shiftKey&&!t.ctrlKey&&!t.metaKey)return e.openOverlay($(this)),!1}),$(".close-attachments a").live("click",function(){return e.closeOverlay(),!1}),$("#viewer-img img").live("click",function(){return $(this).toggleClass("zoomed"),$("#viewer").toggleClass("zoomed"),$("#secondary").toggleClass("zoomed"),e.toggleSwipeListener(),!1})},showOverlay:function(e){var t=this;this.overlay.length&&$.ajax(e,{dataType:"html",cache:!1,success:function(e){t.overlay.html(e),Dribbble.isMobile()?$(".shot-overlay").is(":visible")?($(".shot-overlay").hide(),t.inShotOverlay=!0):$("#header, #wrap, #footer").hide():$("body, .shot-overlay").addClass("attachment-noscroll"),t.overlay.show().focus(),t.bindSwipeListener()}})},hideOverlay:function(){Dribbble.isMobile()?this.inShotOverlay?$(".shot-overlay").show():$("#header, #wrap, #footer").show():$("body, .shot-overlay").removeClass("attachment-noscroll"),this.overlay.empty().hide()},closeOverlay:function(){Dribbble.Router.go(-this.stepsToShotPage())},openOverlay:function(e){var t=e.attr("href"),i=e.data("title");t&&Dribbble.Router.pushState({"steps-from-shot":this.stepsToShotPage()+1},i,t)},findElements:function(){this.links=$(".attachments ul.thumbs li a, #attachments ul li a"),this.overlay=$(".attachment-overlay")},overlayVisible:function(){return this.overlay&&this.overlay.is(":visible")},stepsToShotPage:function(){return History.getState().data["steps-from-shot"]||0},navigate:function(e){var t=$("#attachments"),i=t.find("li.active"),n=e?i.prev("li"):i.next("li");if(!n.length){var o=e?-1:0;n=t.find("li").eq(o)}var s=n.find("a");this.openOverlay(s)},toggleSwipeListener:function(){Dribbble.isMobile()&&($("#viewer-img img").swipe(this.swipeEnabled?"disable":"enable"),this.swipeEnabled=!this.swipeEnabled)},bindSwipeListener:function(){Dribbble.isMobile()&&(this.swipeEnabled=!0,$("#viewer-img img").swipe({fingers:1,threshold:200,swipeLeft:Dribbble.Attachments.Keys.right,swipeRight:Dribbble.Attachments.Keys.left}))},Keys:{escape:function(){Dribbble.Attachments.closeOverlay()},left:function(){Dribbble.Attachments.navigate(!0)},right:function(){Dribbble.Attachments.navigate(!1)}}},$(".attachment-overlay").length&&Dribbble.isHistorySupported()&&Dribbble.Attachments.initialize(),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return a.raw?e:encodeURIComponent(e)}function i(e){return a.raw?e:decodeURIComponent(e)}function n(e){return t(a.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),a.json?JSON.parse(e):e}catch(e){}}function s(t,i){var n=a.raw?t:o(t);return e.isFunction(i)?i(n):n}var r=/\+/g,a=e.cookie=function(o,r,l){if(arguments.length>1&&!e.isFunction(r)){if(l=e.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,h=l.expires=new Date;h.setMilliseconds(h.getMilliseconds()+864e5*c)}return document.cookie=[t(o),"=",n(r),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=o?void 0:{},u=document.cookie?document.cookie.split("; "):[],f=0,b=u.length;f<b;f++){var p=u[f].split("="),m=i(p.shift()),g=p.join("=");if(o===m){d=s(g,r);break}o||void 0===(g=s(g))||(d[m]=g)}return d};a.defaults={},e.removeCookie=function(t,i){return e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t)}}),Dribbble.ShotSizes={currentSize:function(){return $("body").hasClass("grid-large")?"large":"small"},viewingLargeShots:function(){return"large"==this.currentSize()},setupWidget:function(){var e=$("ul.large-small");Dribbble.isMobile()&&e.find("[rel=tipsy]").attr("original-title","");var t=function(e,t,i){$.cookie("shot_size_preference",t,{expires:365}),$.cookie("shot_meta_preference",i,{expires:365});var n=$(e),o=this.currentSize()!=t;n.siblings().removeClass("active"),n.addClass("active"),$("body").removeClass("grid-without-meta grid-with-meta grid-"+this.currentSize()).addClass("grid-"+i+"-meta grid-"+t),o&&Dribbble.Screenshots&&Dribbble.Screenshots.refreshList()}.bind(this);e.on("click","li.small-with-meta",function(){return t(this,"small","with"),!1}),e.on("click","li.small-without-meta",function(){return t(this,"small","without"),!1}),e.on("click","li.large-with-meta",function(){return t(this,"large","with"),!1}),e.on("click","li.large-without-meta",function(){return t(this,"large","without"),!1})}},Dribbble.ShotSizes.setupWidget(),Dribbble.Viewport={height:function(){return window.innerHeight||document.documentElement.clientHeight},isVerticallyVisible:function(e,t){t=t||0;var i=e.getBoundingClientRect();return i.top>t*-1&&i.bottom<this.height()+t}},Dribbble.LargeShotViewRecorder={start:function(){var e;Dribbble.ShotSizes.viewingLargeShots()&&($(window).off("scroll.largeShotViewRecorder"),$(window).on("scroll.largeShotViewRecorder",function(){clearTimeout(e),Dribbble.ShotSizes.viewingLargeShots()&&(e=setTimeout(function(){this.considerShotsViewed()}.bind(this),500))}.bind(this)),setTimeout(this.considerShotsViewed.bind(this),1e3))},getScreenshotsInViewPort:function(){return $("li.group[id^=screenshot-]").filter(function(){return Dribbble.Viewport.isVerticallyVisible(this,30)})},considerShotsViewed:function(){var e=this.getScreenshotsInViewPort();e.each(function(e,t){var i=parseInt(t.id.split("-")[1],10);Dribbble.Shots.logView(i)})}},Dribbble.LargeShotViewRecorder.start();